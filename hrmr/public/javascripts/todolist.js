$(()=>{
    var sourceData = [ {
        "category": "John",
        "segments": [ {
          "start": 7,
          "duration": 2,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 2,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Smith",
        "segments": [ {
          "start": 10,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 1,
          "color": "#8dc49f",
          "task": "Task #3"
        }, {
          "duration": 4,
          "color": "#46615e",
          "task": "Task #1"
        } ]
      }, {
        "category": "Ben",
        "segments": [ {
          "start": 12,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "start": 16,
          "duration": 2,
          "color": "#FFE4C4",
          "task": "Task #4"
        } ]
      }, {
        "category": "Mike",
        "segments": [ {
          "start": 9,
          "duration": 6,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 4,
          "color": "#727d6f",
          "task": "Task #2"
        } ]
      }, {
        "category": "Lenny",
        "segments": [ {
          "start": 8,
          "duration": 1,
          "color": "#8dc49f",
          "task": "Task #3"
        }, {
          "duration": 4,
          "color": "#46615e",
          "task": "Task #1"
        } ]
      }, {
        "category": "Scott",
        "segments": [ {
          "start": 15,
          "duration": 3,
          "color": "#727d6f",
          "task": "Task #2"
        } ]
      }, {
        "category": "Julia",
        "segments": [ {
          "start": 9,
          "duration": 2,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 1,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 8,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Bob",
        "segments": [ {
          "start": 9,
          "duration": 8,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 7,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Kendra",
        "segments": [ {
          "start": 11,
          "duration": 8,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "start": 16,
          "duration": 2,
          "color": "#FFE4C4",
          "task": "Task #4"
        } ]
      }, {
        "category": "Tom",
        "segments": [ {
          "start": 9,
          "duration": 4,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 3,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 5,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Kyle",
        "segments": [ {
          "start": 6,
          "duration": 3,
          "color": "#727d6f",
          "task": "Task #2"
        } ]
      }, {
        "category": "Anita",
        "segments": [ {
          "start": 12,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "start": 16,
          "duration": 2,
          "color": "#FFE4C4",
          "task": "Task #4"
        } ]
      }, {
        "category": "Jack",
        "segments": [ {
          "start": 8,
          "duration": 10,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        } ]
      }, {
        "category": "Kim",
        "segments": [ {
          "start": 12,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 3,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Aaron",
        "segments": [ {
          "start": 18,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 2,
          "color": "#FFE4C4",
          "task": "Task #4"
        } ]
      }, {
        "category": "Alan",
        "segments": [ {
          "start": 17,
          "duration": 2,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 2,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Ruth",
        "segments": [ {
          "start": 13,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 1,
          "color": "#8dc49f",
          "task": "Task #3"
        }, {
          "duration": 4,
          "color": "#46615e",
          "task": "Task #1"
        } ]
      }, {
        "category": "Simon",
        "segments": [ {
          "start": 10,
          "duration": 3,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "start": 17,
          "duration": 4,
          "color": "#FFE4C4",
          "task": "Task #4"
        } ]
      }, {
        "category": "John",
        "segments": [ {
          "start": 7,
          "duration": 2,
          "color": "#46615e",
          "task": "Task #1"
        }, {
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 2,
          "color": "#8dc49f",
          "task": "Task #3"
        } ]
      }, {
        "category": "Ryan",
        "segments": [ {
          "start": 10,
          "duration": 2,
          "color": "#727d6f",
          "task": "Task #2"
        }, {
          "duration": 1,
          "color": "#8dc49f",
          "task": "Task #3"
        }, {
          "duration": 4,
          "color": "#46615e",
          "task": "Task #1"
        } ]
      } ];
      
      /**
       * Function that returns chunk of the data relative to current page
       */
      function getPageData( page ) {
        var pageSize = 5;
        var from = page * pageSize;
        var to = from + pageSize;
        return sourceData.slice( from, to );
      }
      
      /**
       * Loads page data on the chart
       */
      function setPageData ( page ) {
        chart.dataProvider = getPageData( page );
        chart.validateData();
      }
      
      /**
       * Create chart
       */
      AmCharts.useUTC = true;
      var chart = AmCharts.makeChart( "chartdiv", {
        "type": "gantt",
        "theme": "light",
        "period": "hh",
        "dataDateFormat": "YYYY-MM-DD",
        "balloonDateFormat": "JJ:NN",
        "columnWidth": 0.5,
        "valueAxis": {
          "type": "date",
          "minimum": 7,
          "maximum": 31
        },
        "brightnessStep": 10,
        "graph": {
          "fillAlphas": 1,
          "balloonText": "<b>[[task]]</b>: [[open]] [[value]]"
        },
        "rotate": true,
        "categoryField": "category",
        "segmentsField": "segments",
        "colorField": "color",
        "startDate": "2021-10-27",
        "startField": "start",
        "endField": "end",
        "durationField": "duration",
        "dataProvider": getPageData( 0 ),
        "valueScrollbar": {
          "autoGridCount": true
        },
        "chartCursor": {
          "cursorColor": "#55bb76",
          "valueBalloonsEnabled": false,
          "cursorAlpha": 0,
          "valueLineAlpha": 0.5,
          "valueLineBalloonEnabled": true,
          "valueLineEnabled": true,
          "zoomable": false,
          "valueZoomable": true
        }
      } );

        function before_month() {
    while (calendar.rows.length > 2) {
        //2줄이 남을 때 까지 줄을 지워줌
        //버튼과 요일이 남아야 하기 때문에 2줄만 남기고 지운다.
          calendar.deleteRow(calendar.rows.length-1);
        //length-1 = 아래서부터 지우라는 뜻
              }
    month = month-1
      //한달씩 뒤로감
    if( month === -1){
      //0월이 되었을 때 이전연도 12월로 가도록 작업
      //js에서 0월 = 실제 1월 이므로 -1로 맞춰야한다.
      year = year - 1;
      month = month + 12;
    }
    YM = year + "년" + (month+1) + "월"; 
    document.getElementById("YM").innerHTML = YM;
    first_date = new Date(year,month,1).getDate();
    last_date = new Date(year,month+1,0).getDate();
    first_day = new Date(year,month,1).getDay();
    makecalendar();	
    }

  function next_month() {
    while (calendar.rows.length > 2) {
          calendar.deleteRow(calendar.rows.length-1);
            }
    month = month+1
    //한달씩 증가함
    if(month === 12){
      //13월이 되었을 때 다음연도 1월로 가도록 작업
      //js에서 11월 = 실제 12월 이므로 12로 맞춰야한다.
      year = year + 1;
      month = month -12;
    }
    
    YM = year + "년" + (month+1) + "월"; 
    document.getElementById("YM").innerHTML = YM;
    first_date = new Date(year,month,1).getDate();
    last_date = new Date(year,month+1,0).getDate();
    first_day = new Date(year,month,1).getDay();
    makecalendar();	
  }

  before_month();
});


